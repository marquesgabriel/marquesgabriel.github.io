function smoothScroll(e){$('a[href^="#"]').on("click",function(t){var o=$($(this).attr("href"));o.length&&(t.preventDefault(),$("html, body").animate({scrollTop:o.offset().top},e))})}function activateMenu(){var e=$(".nav"),t=$(".nav > ul");e.headroom({offset:205,tolerance:5,classes:{initial:"animated",pinned:"slideDown",unpinned:"slideUp"}}),$(".page-wrap").click(function(){t.slideUp()}),$(".nav-header a").on("click",{menu:t},function(e){$(e.data.menu).slideToggle()}),$(".nav ul a").on("click",{menu:t},function(e){$(this).parent("li").addClass("active").siblings("li").removeClass("active"),"none"!==e.data.menu.css("display")&&e.data.menu.slideUp()})}function about_toggle(){$(".about-link").on("click",function(e){e.preventDefault();var t=$(this),o=t.attr("href"),n=t.attr("data-siteurl");console.log("linkTo"),console.log(o),console.log("site_url"),console.log(n),get_about(n,o.substr(1)),open_about(o)})}function get_about(e,t){var o=e+"/"+t+".html";$(".about-container").html('<div class="loader"><div class="innerLoader"></div></div>'),$.ajax({cache:!0,url:o}).done(function(){console.log("Project",o),$(".about-container").load(o,function(){close_about()})}).fail(function(){console.error(o,"not found"),$(".loader").remove(),$(".intro-text").slideDown("slow")})}function open_about(e){$(".about-container").find(e).slideDown("slow");$(".intro-text").slideUp("slow")}function close_about(){once($(".about-container .close").on("click",function(e){console.log("Closing..."),e.preventDefault(),$(this).parent(".work").slideUp(),$(".intro-text").slideDown("slow")}))}function work_toggle(){$(".work-tile-link").on("click",function(e){e.preventDefault();var t=$(this),o=t.attr("href"),n=t.attr("data-siteurl");console.log("Getting projects...",o,n),get_project(n,o.substr(1)),open_work(o)})}function get_project(e,t){var o=e+"/projects/"+t+".html";$(".work-container").html('<div class="loader"><div class="innerLoader"></div></div>'),$.ajax({cache:!0,url:o}).done(function(){console.log("Project",o),$(".work-container").load(o,function(){close_work()})}).fail(function(){console.error(o,"not found"),$(".loader").remove(),$(".work-grid").slideDown("slow")})}function open_work(e){$(".work-container").find(e).slideDown("slow");$(".work-grid").slideUp("slow")}function close_work(){once($(".work-container .close").on("click",function(e){console.log("Closing..."),e.preventDefault(),$(this).parent(".work").slideUp(),$(".work-grid").slideDown("slow")}))}function handle_form_submit(){var e=$("#contact-form"),t=e.attr("action"),o=e.find("[type='submit']"),n=e.find("#contact-name"),a=e.find("#contact-email"),l=e.find("#contact-subject"),i=e.find("#contact-message"),r=e.find(".form-result");o.before('<input type="text" name="isBot" id="isBot"/>'),honeyPot=e.find("#isBot"),e.submit(function(){return n.removeClass("error"),a.removeClass("error"),l.removeClass("error"),i.removeClass("error"),validate(n,"text")||n.addClass("error").next(".error-message").text("What do I call you"),validate(a,"email")||a.addClass("error").next(".error-message").text("The email is not valid"),validate(l,"text")||l.addClass("error").next(".error-message").text("The subject is required"),validate(i,"text")||i.addClass("error").next(".error-message").text("Please write something"),e.find("input, textarea").hasClass("error")||""!==honeyPot.val()||(o.attr("disabled","disabled"),submit_test=o.val(),o.val("submitting..."),$.post(t,{name:n.val(),email:a.val(),subject:l.val(),message:i.val()},function(t){e.find(".form-input").val(""),o.attr("disabled",!1),o.val(submit_test),r.slideDown().css("display","block")},"json")),!1})}function validate(e,t){switch(t){case"email":result=validateEmail(e.val());break;case"text":result=e.val().length>0;break;default:result=!1}return result}function validateEmail(e){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}function once(e,t){var o;return function(){return e&&(o=e.apply(t||this,arguments),e=null),o}}$(function(){smoothScroll(500),activateMenu(),work_toggle(),about_toggle(),handle_form_submit()});
